<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.hypeboy.codemeets.model.dao.QnaDao">
	
	<resultMap type="QnaDto" id="qna">
		<result column="group_question_pk" property="groupQuestionPk" />
		<result column="group_question_title" property="groupQuestionTitle" />
		<result column="group_question_contents" property="groupQuestionTontents" />
		<result column="group_question_date" property="groupQuestionDate" />
		<result column="group_question_update" property="groupQuestionUpdate" />
		<result column="group_question_like" property="groupQuestionLike" />
		<result column="group_pk" property="groupPk" />
		<result column="user_pk" property="userPk"/>
	</resultMap>
	
	<insert id="writeQna" parameterType="QnaDto">x`
		INSERT INTO board (group_question_title, group_question_contents, group_question_date, group_pk, user_pk)
		VALUES (#{groupQuestionTitle}, #{groupQuestionContents}, now(), #{groupPk}, #{userPk})
	</insert>
	<select id="getList" parameterType="int" resultMap="qna">
		select group_question_pk, group_question_title, group_question_contents, date_format(group_question_date, "%Y-%m-%d") as group_question_date, group_question_update, group_question_like, group_pk, user_pk
		from group_question
		where group_pk = #{groupPk}
	</select>
	<select id="getQna" parameterType="int" resultMap="qna">
		select group_question_pk, group_question_title, group_question_contents, date_format(group_question_date, "%Y-%m-%d") as group_question_date, group_question_update, group_question_like, group_pk, user_pk
		from group_question
		where group_question_pk = #{qnaPk}
	</select>
	<update id="modifyQna" parameterType="QnaDto">
		update group_question
		set group_question_title = #{groupQuestionTitle}, group_question_contents = #{groupQuestionContents}, group_question_date = now(), group_question_update = 1, 
		where group_question_pk = #{groupQuestionPk}
	</update>
	<delete id="deleteQna" parameterType="int">
		delete from group_question
		where group_question_pk = #{groupQuestionPk}
	</delete>
	
	
	
	
	
</mapper>